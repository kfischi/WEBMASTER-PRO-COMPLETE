<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebMaster Pro - Professional Editor</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&family=Assistant:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            /* Color System - Professional Grade */
            --primary-50: #eff6ff;
            --primary-100: #dbeafe;
            --primary-200: #bfdbfe;
            --primary-300: #93c5fd;
            --primary-400: #60a5fa;
            --primary-500: #3b82f6;
            --primary-600: #2563eb;
            --primary-700: #1d4ed8;
            --primary-800: #1e40af;
            --primary-900: #1e3a8a;
            
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-400: #9ca3af;
            --gray-500: #6b7280;
            --gray-600: #4b5563;
            --gray-700: #374151;
            --gray-800: #1f2937;
            --gray-900: #111827;
            
            --success-500: #10b981;
            --warning-500: #f59e0b;
            --error-500: #ef4444;
            
            /* Spacing System */
            --space-1: 0.25rem;
            --space-2: 0.5rem;
            --space-3: 0.75rem;
            --space-4: 1rem;
            --space-5: 1.25rem;
            --space-6: 1.5rem;
            --space-8: 2rem;
            --space-10: 2.5rem;
            --space-12: 3rem;
            --space-16: 4rem;
            --space-20: 5rem;
            
            /* Typography System */
            --font-size-xs: 0.75rem;
            --font-size-sm: 0.875rem;
            --font-size-base: 1rem;
            --font-size-lg: 1.125rem;
            --font-size-xl: 1.25rem;
            --font-size-2xl: 1.5rem;
            --font-size-3xl: 1.875rem;
            --font-size-4xl: 2.25rem;
            
            /* Shadow System */
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-base: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            
            /* Animation System */
            --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-base: 300ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: 500ms cubic-bezier(0.4, 0, 0.2, 1);
            
            /* Border Radius System */
            --radius-sm: 0.25rem;
            --radius-base: 0.375rem;
            --radius-md: 0.5rem;
            --radius-lg: 0.75rem;
            --radius-xl: 1rem;
            --radius-2xl: 1.5rem;
            --radius-full: 9999px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Assistant', -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: var(--gray-50);
            color: var(--gray-900);
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Layout System - Professional Grid */
        .editor-layout {
            display: grid;
            grid-template-columns: 280px 1fr 320px;
            grid-template-rows: 60px 1fr;
            grid-template-areas: 
                "sidebar header properties"
                "sidebar main properties";
            height: 100vh;
            overflow: hidden;
        }

        /* Header Bar - Clean & Professional */
        .header-bar {
            grid-area: header;
            background: white;
            border-bottom: 1px solid var(--gray-200);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 var(--space-6);
            box-shadow: var(--shadow-sm);
            z-index: 100;
        }

        .header-title {
            display: flex;
            align-items: center;
            gap: var(--space-3);
        }

        .header-title h1 {
            font-size: var(--font-size-lg);
            font-weight: 600;
            color: var(--gray-900);
        }

        .site-badge {
            background: var(--primary-100);
            color: var(--primary-700);
            padding: var(--space-1) var(--space-3);
            border-radius: var(--radius-full);
            font-size: var(--font-size-xs);
            font-weight: 500;
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: var(--space-3);
        }

        /* Sidebar - Modern Navigation */
        .sidebar {
            grid-area: sidebar;
            background: white;
            border-right: 1px solid var(--gray-200);
            overflow-y: auto;
            scrollbar-width: thin;
        }

        .sidebar::-webkit-scrollbar {
            width: 6px;
        }

        .sidebar::-webkit-scrollbar-track {
            background: var(--gray-100);
        }

        .sidebar::-webkit-scrollbar-thumb {
            background: var(--gray-300);
            border-radius: var(--radius-full);
        }

        .sidebar-header {
            padding: var(--space-6);
            border-bottom: 1px solid var(--gray-200);
        }

        .sidebar-header h2 {
            font-size: var(--font-size-base);
            font-weight: 600;
            color: var(--gray-900);
            margin-bottom: var(--space-2);
        }

        .sidebar-subtitle {
            font-size: var(--font-size-sm);
            color: var(--gray-500);
        }

        .sidebar-section {
            padding: var(--space-6);
            border-bottom: 1px solid var(--gray-100);
        }

        .sidebar-section-title {
            font-size: var(--font-size-sm);
            font-weight: 600;
            color: var(--gray-700);
            margin-bottom: var(--space-4);
            text-transform: uppercase;
            letter-spacing: 0.025em;
        }

        /* Site List - Premium Design */
        .site-list {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: var(--space-2);
        }

        .site-item {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            padding: var(--space-3) var(--space-4);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all var(--transition-fast);
            border: 1px solid transparent;
        }

        .site-item:hover {
            background: var(--gray-50);
            border-color: var(--gray-200);
        }

        .site-item.active {
            background: var(--primary-50);
            border-color: var(--primary-200);
            color: var(--primary-700);
        }

        .site-item.active .site-icon {
            color: var(--primary-600);
        }

        .site-icon {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--gray-400);
            font-size: var(--font-size-base);
        }

        .site-name {
            font-size: var(--font-size-sm);
            font-weight: 500;
            flex: 1;
        }

        .site-status {
            width: 8px;
            height: 8px;
            border-radius: var(--radius-full);
            background: var(--success-500);
        }

        /* Main Content Area */
        .main-content {
            grid-area: main;
            background: var(--gray-100);
            position: relative;
            overflow: hidden;
        }

        .preview-container {
            width: 100%;
            height: 100%;
            position: relative;
        }

        .preview-frame {
            width: 100%;
            height: 100%;
            border: none;
            background: white;
            border-radius: var(--radius-lg);
            margin: var(--space-4);
            width: calc(100% - 2rem);
            height: calc(100% - 2rem);
            box-shadow: var(--shadow-lg);
        }

        /* Properties Panel - Advanced Controls */
        .properties-panel {
            grid-area: properties;
            background: white;
            border-left: 1px solid var(--gray-200);
            overflow-y: auto;
            scrollbar-width: thin;
        }

        .properties-panel::-webkit-scrollbar {
            width: 6px;
        }

        .properties-panel::-webkit-scrollbar-track {
            background: var(--gray-100);
        }

        .properties-panel::-webkit-scrollbar-thumb {
            background: var(--gray-300);
            border-radius: var(--radius-full);
        }

        .properties-header {
            padding: var(--space-6);
            border-bottom: 1px solid var(--gray-200);
            background: var(--gray-50);
        }

        .properties-header h2 {
            font-size: var(--font-size-lg);
            font-weight: 600;
            color: var(--gray-900);
            margin-bottom: var(--space-1);
        }

        .properties-subtitle {
            font-size: var(--font-size-sm);
            color: var(--gray-500);
        }

        /* Form Controls - Professional Design */
        .form-section {
            padding: var(--space-6);
            border-bottom: 1px solid var(--gray-100);
        }

        .form-section:last-child {
            border-bottom: none;
        }

        .form-section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--space-4);
            cursor: pointer;
            user-select: none;
        }

        .form-section-title {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            font-size: var(--font-size-sm);
            font-weight: 600;
            color: var(--gray-700);
        }

        .form-section-icon {
            color: var(--gray-400);
        }

        .form-section-toggle {
            color: var(--gray-400);
            font-size: var(--font-size-sm);
            transition: transform var(--transition-fast);
        }

        .form-section.collapsed .form-section-toggle {
            transform: rotate(-90deg);
        }

        .form-section-content {
            display: block;
            animation: slideDown var(--transition-base);
        }

        .form-section.collapsed .form-section-content {
            display: none;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .form-group {
            margin-bottom: var(--space-5);
        }

        .form-group:last-child {
            margin-bottom: 0;
        }

        .form-label {
            display: block;
            font-size: var(--font-size-sm);
            font-weight: 500;
            color: var(--gray-700);
            margin-bottom: var(--space-2);
        }

        .form-input {
            width: 100%;
            padding: var(--space-3);
            border: 1px solid var(--gray-300);
            border-radius: var(--radius-md);
            font-size: var(--font-size-sm);
            background: white;
            transition: all var(--transition-fast);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary-500);
            box-shadow: 0 0 0 3px var(--primary-100);
        }

        .form-textarea {
            resize: vertical;
            min-height: 80px;
            font-family: inherit;
        }

        .form-select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
            background-position: left 12px center;
            background-repeat: no-repeat;
            background-size: 16px 12px;
            padding-left: 40px;
        }

        /* Color Picker - Advanced */
        .color-group {
            display: flex;
            align-items: center;
            gap: var(--space-3);
        }

        .color-picker {
            width: 40px;
            height: 40px;
            border: 2px solid var(--gray-200);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .color-picker:hover {
            border-color: var(--primary-400);
            transform: scale(1.05);
        }

        .color-input {
            flex: 1;
        }

        /* Button System - Premium */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-2);
            padding: var(--space-2) var(--space-4);
            border: 1px solid transparent;
            border-radius: var(--radius-md);
            font-size: var(--font-size-sm);
            font-weight: 500;
            cursor: pointer;
            transition: all var(--transition-fast);
            text-decoration: none;
            white-space: nowrap;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-primary {
            background: var(--primary-600);
            color: white;
            border-color: var(--primary-600);
        }

        .btn-primary:hover:not(:disabled) {
            background: var(--primary-700);
            border-color: var(--primary-700);
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }

        .btn-secondary {
            background: white;
            color: var(--gray-700);
            border-color: var(--gray-300);
        }

        .btn-secondary:hover:not(:disabled) {
            background: var(--gray-50);
            border-color: var(--gray-400);
        }

        .btn-success {
            background: var(--success-500);
            color: white;
            border-color: var(--success-500);
        }

        .btn-success:hover:not(:disabled) {
            background: #059669;
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }

        .btn-sm {
            padding: var(--space-1) var(--space-3);
            font-size: var(--font-size-xs);
        }

        .btn-lg {
            padding: var(--space-3) var(--space-6);
            font-size: var(--font-size-base);
        }

        /* Services Manager - Advanced */
        .services-list {
            display: flex;
            flex-direction: column;
            gap: var(--space-4);
        }

        .service-card {
            background: var(--gray-50);
            border: 1px solid var(--gray-200);
            border-radius: var(--radius-lg);
            padding: var(--space-4);
            position: relative;
        }

        .service-card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--space-3);
        }

        .service-card-title {
            font-size: var(--font-size-sm);
            font-weight: 600;
            color: var(--gray-800);
        }

        .service-card-actions {
            display: flex;
            gap: var(--space-1);
        }

        .service-card-btn {
            width: 24px;
            height: 24px;
            border: none;
            border-radius: var(--radius-sm);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--font-size-xs);
            transition: all var(--transition-fast);
        }

        .service-card-btn.delete {
            background: var(--error-500);
            color: white;
        }

        .service-card-btn.delete:hover {
            background: #dc2626;
        }

        /* Media Manager - Professional */
        .media-upload-area {
            border: 2px dashed var(--gray-300);
            border-radius: var(--radius-lg);
            padding: var(--space-8);
            text-align: center;
            transition: all var(--transition-fast);
            cursor: pointer;
        }

        .media-upload-area:hover {
            border-color: var(--primary-400);
            background: var(--primary-50);
        }

        .media-upload-area.dragover {
            border-color: var(--primary-500);
            background: var(--primary-100);
        }

        .media-upload-icon {
            font-size: var(--font-size-3xl);
            color: var(--gray-400);
            margin-bottom: var(--space-3);
        }

        .media-upload-text {
            font-size: var(--font-size-base);
            color: var(--gray-600);
            margin-bottom: var(--space-2);
        }

        .media-upload-subtext {
            font-size: var(--font-size-sm);
            color: var(--gray-500);
        }

        .media-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: var(--space-3);
            margin-top: var(--space-4);
        }

        .media-item {
            aspect-ratio: 1;
            border-radius: var(--radius-md);
            overflow: hidden;
            position: relative;
            cursor: pointer;
            transition: all var(--transition-fast);
            border: 2px solid transparent;
        }

        .media-item:hover {
            transform: scale(1.05);
            border-color: var(--primary-400);
            box-shadow: var(--shadow-lg);
        }

        .media-item img,
        .media-item video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .media-item-overlay {
            position: absolute;
            top: 0;
            right: 0;
            left: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity var(--transition-fast);
        }

        .media-item:hover .media-item-overlay {
            opacity: 1;
        }

        .media-item-delete {
            position: absolute;
            top: var(--space-1);
            left: var(--space-1);
            width: 20px;
            height: 20px;
            background: var(--error-500);
            color: white;
            border: none;
            border-radius: var(--radius-full);
            cursor: pointer;
            font-size: var(--font-size-xs);
            opacity: 0;
            transition: opacity var(--transition-fast);
        }

        .media-item:hover .media-item-delete {
            opacity: 1;
        }

        /* AI Image Search - Modern */
        .ai-search-container {
            margin-top: var(--space-6);
        }

        .ai-search-header {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            margin-bottom: var(--space-4);
        }

        .ai-search-input {
            display: flex;
            gap: var(--space-2);
        }

        .ai-search-field {
            flex: 1;
        }

        .ai-results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: var(--space-3);
            max-height: 300px;
            overflow-y: auto;
        }

        /* Notifications - Elegant */
        .notification {
            position: fixed;
            top: var(--space-4);
            left: 50%;
            transform: translateX(-50%) translateY(-100px);
            background: white;
            border: 1px solid var(--gray-200);
            border-radius: var(--radius-lg);
            padding: var(--space-4);
            box-shadow: var(--shadow-xl);
            z-index: 1000;
            transition: all var(--transition-base);
            display: flex;
            align-items: center;
            gap: var(--space-3);
            min-width: 300px;
        }

        .notification.show {
            transform: translateX(-50%) translateY(0);
        }

        .notification-icon {
            width: 24px;
            height: 24px;
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--font-size-sm);
            color: white;
        }

        .notification.success .notification-icon {
            background: var(--success-500);
        }

        .notification.error .notification-icon {
            background: var(--error-500);
        }

        .notification.warning .notification-icon {
            background: var(--warning-500);
        }

        .notification-content {
            flex: 1;
        }

        .notification-title {
            font-size: var(--font-size-sm);
            font-weight: 600;
            color: var(--gray-900);
            margin-bottom: var(--space-1);
        }

        .notification-message {
            font-size: var(--font-size-sm);
            color: var(--gray-600);
        }

        /* Loading States */
        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 100;
        }

        .loading-spinner {
            width: 32px;
            height: 32px;
            border: 3px solid var(--gray-200);
            border-top: 3px solid var(--primary-500);
            border-radius: var(--radius-full);
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .editor-layout {
                grid-template-columns: 1fr;
                grid-template-rows: 60px auto 1fr;
                grid-template-areas: 
                    "header"
                    "tabs"
                    "main";
            }
            
            .sidebar,
            .properties-panel {
                display: none;
            }
            
            .mobile-tabs {
                display: flex;
                background: white;
                border-bottom: 1px solid var(--gray-200);
                overflow-x: auto;
            }
            
            .mobile-tab {
                padding: var(--space-4);
                border-bottom: 2px solid transparent;
                cursor: pointer;
                white-space: nowrap;
                font-size: var(--font-size-sm);
                font-weight: 500;
                color: var(--gray-600);
            }
            
            .mobile-tab.active {
                color: var(--primary-600);
                border-bottom-color: var(--primary-600);
            }
        }

        /* Hidden Elements */
        .hidden {
            display: none !important;
        }

        /* File Input Styling */
        .file-input {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        /* Utility Classes */
        .flex {
            display: flex;
        }

        .items-center {
            align-items: center;
        }

        .justify-between {
            justify-content: space-between;
        }

        .gap-2 {
            gap: var(--space-2);
        }

        .gap-3 {
            gap: var(--space-3);
        }

        .text-sm {
            font-size: var(--font-size-sm);
        }

        .font-medium {
            font-weight: 500;
        }

        .font-semibold {
            font-weight: 600;
        }
    </style>
</head>
<body>
    <!-- Main Editor Layout -->
    <div class="editor-layout">
        <!-- Header Bar -->
        <header class="header-bar">
            <div class="header-title">
                <h1>WebMaster Pro</h1>
                <span class="site-badge" id="currentSiteBadge">בחר אתר</span>
            </div>
            <div class="header-actions">
                <button class="btn btn-secondary" id="previewBtn">
                    <i class="fas fa-eye"></i>
                    תצוגה מקדימה
                </button>
                <button class="btn btn-primary" id="saveBtn">
                    <i class="fas fa-save"></i>
                    שמירה
                </button>
            </div>
        </header>

        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2>בחר אתר לעריכה</h2>
                <p class="sidebar-subtitle">בחר אתר מהרשימה כדי להתחיל לערוך</p>
            </div>

            <div class="sidebar-section">
                <h3 class="sidebar-section-title">אתרים זמינים</h3>
                <ul class="site-list" id="siteList">
                    <li class="site-item" data-site="dr-michal-rosen">
                        <div class="site-icon">
                            <i class="fas fa-user-md"></i>
                        </div>
                        <span class="site-name">ד"ר מיכל רוזן</span>
                        <div class="site-status"></div>
                    </li>
                    <li class="site-item" data-site="law-firm">
                        <div class="site-icon">
                            <i class="fas fa-balance-scale"></i>
                        </div>
                        <span class="site-name">משרד עורכי דין</span>
                        <div class="site-status"></div>
                    </li>
                    <li class="site-item" data-site="fitness-co">
                        <div class="site-icon">
                            <i class="fas fa-dumbbell"></i>
                        </div>
                        <span class="site-name">Fitness Co</span>
                        <div class="site-status"></div>
                    </li>
                    <li class="site-item" data-site="tech-startup">
                        <div class="site-icon">
                            <i class="fas fa-rocket"></i>
                        </div>
                        <span class="site-name">Tech Startup</span>
                        <div class="site-status"></div>
                    </li>
                    <li class="site-item" data-site="restaurant">
                        <div class="site-icon">
                            <i class="fas fa-utensils"></i>
                        </div>
                        <span class="site-name">מסעדת השף</span>
                        <div class="site-status"></div>
                    </li>
                </ul>
            </div>

            <div class="sidebar-section">
                <h3 class="sidebar-section-title">כלים מתקדמים</h3>
                <div class="flex flex-col gap-2">
                    <button class="btn btn-secondary btn-sm" id="newSiteBtn">
                        <i class="fas fa-plus"></i>
                        צור אתר חדש
                    </button>
                    <button class="btn btn-secondary btn-sm" id="duplicateBtn">
                        <i class="fas fa-copy"></i>
                        שכפל אתר
                    </button>
                    <button class="btn btn-secondary btn-sm" id="exportBtn">
                        <i class="fas fa-download"></i>
                        ייצא אתר
                    </button>
                    <button class="btn btn-secondary btn-sm" id="importBtn">
                        <i class="fas fa-upload"></i>
                        ייבא אתר
                    </button>
                </div>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content">
            <div class="preview-container">
                <iframe class="preview-frame" id="previewFrame" src="about:blank"></iframe>
                <div class="loading-overlay hidden" id="previewLoading">
                    <div class="loading-spinner"></div>
                </div>
            </div>
        </main>

        <!-- Properties Panel -->
        <aside class="properties-panel">
            <div class="properties-header">
                <h2>מאפיינים</h2>
                <p class="properties-subtitle">ערוך את האתר שלך בזמן אמת</p>
            </div>

            <!-- Basic Settings -->
            <div class="form-section" id="basicSection">
                <div class="form-section-header" onclick="toggleSection('basic')">
                    <div class="form-section-title">
                        <i class="fas fa-cog form-section-icon"></i>
                        הגדרות בסיסיות
                    </div>
                    <i class="fas fa-chevron-down form-section-toggle"></i>
                </div>
                <div class="form-section-content">
                    <div class="form-group">
                        <label class="form-label" for="businessName">שם העסק</label>
                        <input type="text" id="businessName" class="form-input" placeholder="הכנס שם עסק...">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="businessDescription">תיאור העסק</label>
                        <textarea id="businessDescription" class="form-input form-textarea" placeholder="תאר את העסק שלך..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="businessType">סוג העסק</label>
                        <select id="businessType" class="form-input form-select">
                            <option value="medical">רפואי</option>
                            <option value="legal">משפטי</option>
                            <option value="fitness">כושר</option>
                            <option value="tech">טכנולוגיה</option>
                            <option value="restaurant">מסעדה</option>
                            <option value="beauty">יופי</option>
                            <option value="education">חינוך</option>
                            <option value="other">אחר</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Design Settings -->
            <div class="form-section" id="designSection">
                <div class="form-section-header" onclick="toggleSection('design')">
                    <div class="form-section-title">
                        <i class="fas fa-palette form-section-icon"></i>
                        עיצוב וצבעים
                    </div>
                    <i class="fas fa-chevron-down form-section-toggle"></i>
                </div>
                <div class="form-section-content">
                    <div class="form-group">
                        <label class="form-label">צבע ראשי</label>
                        <div class="color-group">
                            <input type="color" id="primaryColor" class="color-picker" value="#4f46e5">
                            <input type="text" id="primaryColorText" class="form-input color-input" value="#4f46e5">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">צבע משני</label>
                        <div class="color-group">
                            <input type="color" id="secondaryColor" class="color-picker" value="#06b6d4">
                            <input type="text" id="secondaryColorText" class="form-input color-input" value="#06b6d4">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">צבע מבטא</label>
                        <div class="color-group">
                            <input type="color" id="accentColor" class="color-picker" value="#10b981">
                            <input type="text" id="accentColorText" class="form-input color-input" value="#10b981">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="fontFamily">גופן</label>
                        <select id="fontFamily" class="form-input form-select">
                            <option value="Assistant">Assistant (עברית)</option>
                            <option value="Inter">Inter (אנגלית)</option>
                            <option value="Playfair Display">Playfair Display (יוקרתי)</option>
                            <option value="Roboto">Roboto (מודרני)</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Services Manager -->
            <div class="form-section" id="servicesSection">
                <div class="form-section-header" onclick="toggleSection('services')">
                    <div class="form-section-title">
                        <i class="fas fa-list form-section-icon"></i>
                        ניהול שירותים
                    </div>
                    <i class="fas fa-chevron-down form-section-toggle"></i>
                </div>
                <div class="form-section-content">
                    <div class="services-list" id="servicesList">
                        <!-- Services will be dynamically added here -->
                    </div>
                    <button class="btn btn-success btn-sm" id="addServiceBtn" style="width: 100%; margin-top: var(--space-4);">
                        <i class="fas fa-plus"></i>
                        הוסף שירות חדש
                    </button>
                </div>
            </div>

            <!-- Media Manager -->
            <div class="form-section" id="mediaSection">
                <div class="form-section-header" onclick="toggleSection('media')">
                    <div class="form-section-title">
                        <i class="fas fa-images form-section-icon"></i>
                        ניהול מדיה
                    </div>
                    <i class="fas fa-chevron-down form-section-toggle"></i>
                </div>
                <div class="form-section-content">
                    <!-- Upload Area -->
                    <div class="media-upload-area" id="mediaUploadArea">
                        <div class="media-upload-icon">
                            <i class="fas fa-cloud-upload-alt"></i>
                        </div>
                        <div class="media-upload-text">גרור קבצים לכאן</div>
                        <div class="media-upload-subtext">או לחץ כדי לבחור קבצים</div>
                        
                        <input type="file" id="imageUpload" class="file-input" accept="image/*" multiple>
                        <input type="file" id="videoUpload" class="file-input" accept="video/*" multiple>
                    </div>

                    <div class="flex gap-2" style="margin-top: var(--space-4);">
                        <button class="btn btn-secondary btn-sm" onclick="document.getElementById('imageUpload').click()">
                            <i class="fas fa-image"></i>
                            תמונות
                        </button>
                        <button class="btn btn-secondary btn-sm" onclick="document.getElementById('videoUpload').click()">
                            <i class="fas fa-video"></i>
                            וידאו
                        </button>
                    </div>

                    <!-- Media Grid -->
                    <div class="media-grid" id="mediaGrid">
                        <!-- Uploaded media will appear here -->
                    </div>

                    <!-- AI Image Search -->
                    <div class="ai-search-container">
                        <div class="ai-search-header">
                            <i class="fas fa-robot"></i>
                            <span class="font-semibold text-sm">חיפוש תמונות AI</span>
                        </div>
                        
                        <div class="ai-search-input">
                            <input type="text" id="aiSearchInput" class="form-input ai-search-field" placeholder="חפש תמונות...">
                            <button class="btn btn-primary btn-sm" id="aiSearchBtn">
                                <i class="fas fa-search"></i>
                            </button>
                        </div>
                        
                        <div class="ai-results-grid" id="aiResultsGrid">
                            <!-- AI search results will appear here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- SEO Settings -->
            <div class="form-section collapsed" id="seoSection">
                <div class="form-section-header" onclick="toggleSection('seo')">
                    <div class="form-section-title">
                        <i class="fas fa-search form-section-icon"></i>
                        הגדרות SEO
                    </div>
                    <i class="fas fa-chevron-down form-section-toggle"></i>
                </div>
                <div class="form-section-content">
                    <div class="form-group">
                        <label class="form-label" for="metaTitle">כותרת מטא</label>
                        <input type="text" id="metaTitle" class="form-input" placeholder="כותרת לתוצאות חיפוש...">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="metaDescription">תיאור מטא</label>
                        <textarea id="metaDescription" class="form-input form-textarea" placeholder="תיאור לתוצאות חיפוש..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="keywords">מילות מפתח</label>
                        <input type="text" id="keywords" class="form-input" placeholder="מילות מפתח מופרדות בפסיקים...">
                    </div>
                </div>
            </div>
        </aside>
    </div>

    <!-- Mobile Tabs (hidden on desktop) -->
    <div class="mobile-tabs hidden">
        <div class="mobile-tab active" data-tab="sites">אתרים</div>
        <div class="mobile-tab" data-tab="properties">מאפיינים</div>
        <div class="mobile-tab" data-tab="media">מדיה</div>
    </div>

    <!-- Professional JavaScript Implementation -->
    <script>
        // Professional Editor Class
        class WebMasterEditor {
            constructor() {
                this.currentSite = null;
                this.siteData = {};
                this.isDirty = false;
                this.autoSaveInterval = null;
                
                this.init();
            }

            // Initialize Editor
            init() {
                this.setupEventListeners();
                this.setupDragAndDrop();
                this.setupColorPickers();
                this.startAutoSave();
                this.loadDefaultSite();
                
                this.showNotification('האדיטור נטען בהצלחה!', 'success', 'העמוד מוכן לעריכה');
            }

            // Event Listeners Setup
            setupEventListeners() {
                // Site selection
                document.querySelectorAll('.site-item').forEach(item => {
                    item.addEventListener('click', (e) => {
                        this.selectSite(item.dataset.site);
                    });
                });

                // Header actions
                document.getElementById('saveBtn').addEventListener('click', () => this.saveSite());
                document.getElementById('previewBtn').addEventListener('click', () => this.previewSite());

                // Sidebar tools
                document.getElementById('newSiteBtn').addEventListener('click', () => this.createNewSite());
                document.getElementById('duplicateBtn').addEventListener('click', () => this.duplicateSite());
                document.getElementById('exportBtn').addEventListener('click', () => this.exportSite());
                document.getElementById('importBtn').addEventListener('click', () => this.importSite());

                // Form inputs
                document.getElementById('businessName').addEventListener('input', () => this.updateSiteData());
                document.getElementById('businessDescription').addEventListener('input', () => this.updateSiteData());
                document.getElementById('businessType').addEventListener('change', () => this.updateSiteData());
                document.getElementById('fontFamily').addEventListener('change', () => this.updateSiteData());

                // SEO inputs
                document.getElementById('metaTitle').addEventListener('input', () => this.updateSiteData());
                document.getElementById('metaDescription').addEventListener('input', () => this.updateSiteData());
                document.getElementById('keywords').addEventListener('input', () => this.updateSiteData());

                // Services
                document.getElementById('addServiceBtn').addEventListener('click', () => this.addService());

                // Media
                document.getElementById('imageUpload').addEventListener('change', (e) => this.handleFileUpload(e));
                document.getElementById('videoUpload').addEventListener('change', (e) => this.handleFileUpload(e));
                document.getElementById('aiSearchBtn').addEventListener('click', () => this.searchAIImages());
                document.getElementById('aiSearchInput').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') this.searchAIImages();
                });

                // Keyboard shortcuts
                document.addEventListener('keydown', (e) => this.handleKeyboardShortcuts(e));
            }

            // Drag and Drop Setup
            setupDragAndDrop() {
                const uploadArea = document.getElementById('mediaUploadArea');
                
                uploadArea.addEventListener('click', () => {
                    document.getElementById('imageUpload').click();
                });

                uploadArea.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    uploadArea.classList.add('dragover');
                });

                uploadArea.addEventListener('dragleave', () => {
                    uploadArea.classList.remove('dragover');
                });

                uploadArea.addEventListener('drop', (e) => {
                    e.preventDefault();
                    uploadArea.classList.remove('dragover');
                    this.handleFiles(Array.from(e.dataTransfer.files));
                });
            }

            // Color Picker Setup
            setupColorPickers() {
                const colorInputs = ['primaryColor', 'secondaryColor', 'accentColor'];
                
                colorInputs.forEach(inputId => {
                    const colorPicker = document.getElementById(inputId);
                    const textInput = document.getElementById(inputId + 'Text');
                    
                    colorPicker.addEventListener('input', () => {
                        textInput.value = colorPicker.value;
                        this.updateSiteColors();
                    });
                    
                    textInput.addEventListener('input', () => {
                        if (this.isValidHexColor(textInput.value)) {
                            colorPicker.value = textInput.value;
                            this.updateSiteColors();
                        }
                    });
                });
            }

            // Site Selection
            selectSite(siteName) {
                // Update UI
                document.querySelectorAll('.site-item').forEach(item => {
                    item.classList.remove('active');
                });
                document.querySelector(`[data-site="${siteName}"]`).classList.add('active');
                
                // Update header
                document.getElementById('currentSiteBadge').textContent = this.getSiteDisplayName(siteName);
                
                // Save current site if dirty
                if (this.isDirty && this.currentSite) {
                    this.saveSite();
                }
                
                this.currentSite = siteName;
                this.loadSiteData();
                this.loadSitePreview();
                
                this.showNotification('אתר נטען', 'success', `עובד על ${this.getSiteDisplayName(siteName)}`);
            }

            // Load Site Data
            loadSiteData() {
                const savedData = localStorage.getItem(`siteData_${this.currentSite}`);
                
                if (savedData) {
                    this.siteData = JSON.parse(savedData);
                } else {
                    this.siteData = this.getDefaultSiteData(this.currentSite);
                }
                
                this.populateForm();
                this.loadServices();
                this.loadMedia();
                this.isDirty = false;
            }

            // Get Default Site Data
            getDefaultSiteData(siteName) {
                const defaults = {
                    'dr-michal-rosen': {
                        businessName: 'ד"ר מיכל רוזן',
                        businessDescription: 'מרפאה מתקדמת לטיפולי יופי ואסתטיקה רפואית',
                        businessType: 'medical',
                        primaryColor: '#4f46e5',
                        secondaryColor: '#06b6d4',
                        accentColor: '#10b981',
                        fontFamily: 'Assistant',
                        services: [
                            {
                                id: 1,
                                name: 'בוטוקס',
                                description: 'טיפול מתקדם להחלקת קמטים וקווי הבעה',
                                price: '₪1,200',
                                duration: '30 דקות',
                                icon: 'fas fa-syringe',
                                features: ['טיפול ללא כאב', 'תוצאות מיידיות', 'בטיחות מוחלטת']
                            },
                            {
                                id: 2,
                                name: 'מילוי שפתיים',
                                description: 'מילוי מתקדם לשפתיים מלאות וחטובות',
                                price: '₪1,800',
                                duration: '45 דקות',
                                icon: 'fas fa-lips',
                                features: ['חומרי מילוי איכותיים', 'מראה טבעי', 'תוצאות עד שנה']
                            }
                        ],
                        media: [],
                        metaTitle: 'ד"ר מיכל רוזן - מרפאה לאסתטיקה רפואית',
                        metaDescription: 'מרפאה מובילה לטיפולי יופי ואסתטיקה רפואית בתל אביב',
                        keywords: 'בוטוקס, מילוי שפתיים, אסתטיקה רפואית'
                    }
                };
                
                return defaults[siteName] || {
                    businessName: 'עסק חדש',
                    businessDescription: 'תיאור העסק',
                    businessType: 'other',
                    primaryColor: '#4f46e5',
                    secondaryColor: '#06b6d4',
                    accentColor: '#10b981',
                    fontFamily: 'Assistant',
                    services: [],
                    media: [],
                    metaTitle: '',
                    metaDescription: '',
                    keywords: ''
                };
            }

            // Populate Form
            populateForm() {
                document.getElementById('businessName').value = this.siteData.businessName || '';
                document.getElementById('businessDescription').value = this.siteData.businessDescription || '';
                document.getElementById('businessType').value = this.siteData.businessType || 'other';
                document.getElementById('fontFamily').value = this.siteData.fontFamily || 'Assistant';
                
                // Colors
                document.getElementById('primaryColor').value = this.siteData.primaryColor || '#4f46e5';
                document.getElementById('primaryColorText').value = this.siteData.primaryColor || '#4f46e5';
                document.getElementById('secondaryColor').value = this.siteData.secondaryColor || '#06b6d4';
                document.getElementById('secondaryColorText').value = this.siteData.secondaryColor || '#06b6d4';
                document.getElementById('accentColor').value = this.siteData.accentColor || '#10b981';
                document.getElementById('accentColorText').value = this.siteData.accentColor || '#10b981';
                
                // SEO
                document.getElementById('metaTitle').value = this.siteData.metaTitle || '';
                document.getElementById('metaDescription').value = this.siteData.metaDescription || '';
                document.getElementById('keywords').value = this.siteData.keywords || '';
            }

            // Load Services
            loadServices() {
                const servicesList = document.getElementById('servicesList');
                servicesList.innerHTML = '';
                
                if (this.siteData.services && this.siteData.services.length > 0) {
                    this.siteData.services.forEach((service, index) => {
                        this.addServiceToDOM(service, index);
                    });
                }
            }

            // Add Service to DOM
            addServiceToDOM(service, index) {
                const servicesList = document.getElementById('servicesList');
                
                const serviceCard = document.createElement('div');
                serviceCard.className = 'service-card';
                serviceCard.innerHTML = `
                    <div class="service-card-header">
                        <div class="service-card-title">${service.name || 'שירות חדש'}</div>
                        <div class="service-card-actions">
                            <button class="service-card-btn delete" onclick="editor.removeService(${index})">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">שם השירות</label>
                        <input type="text" class="form-input" value="${service.name || ''}" onchange="editor.updateService(${index}, 'name', this.value)">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">תיאור</label>
                        <textarea class="form-input form-textarea" onchange="editor.updateService(${index}, 'description', this.value)">${service.description || ''}</textarea>
                    </div>
                    
                    <div class="flex gap-3">
                        <div class="form-group" style="flex: 1;">
                            <label class="form-label">מחיר</label>
                            <input type="text" class="form-input" value="${service.price || ''}" onchange="editor.updateService(${index}, 'price', this.value)">
                        </div>
                        
                        <div class="form-group" style="flex: 1;">
                            <label class="form-label">משך זמן</label>
                            <input type="text" class="form-input" value="${service.duration || ''}" onchange="editor.updateService(${index}, 'duration', this.value)">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">אייקון (Font Awesome)</label>
                        <input type="text" class="form-input" value="${service.icon || 'fas fa-star'}" onchange="editor.updateService(${index}, 'icon', this.value)" placeholder="fas fa-star">
                    </div>
                `;
                
                servicesList.appendChild(serviceCard);
            }

            // Add Service
            addService() {
                if (!this.siteData.services) {
                    this.siteData.services = [];
                }
                
                const newService = {
                    id: Date.now(),
                    name: 'שירות חדש',
                    description: 'תיאור השירות',
                    price: '₪100',
                    duration: '30 דקות',
                    icon: 'fas fa-star',
                    features: []
                };
                
                this.siteData.services.push(newService);
                this.loadServices();
                this.updateSiteInPreview();
                this.isDirty = true;
            }

            // Update Service
            updateService(index, field, value) {
                if (!this.siteData.services[index]) return;
                
                this.siteData.services[index][field] = value;
                
                // Update card title if name changed
                if (field === 'name') {
                    const cardTitle = document.querySelectorAll('.service-card-title')[index];
                    if (cardTitle) cardTitle.textContent = value || 'שירות חדש';
                }
                
                this.updateSiteInPreview();
                this.isDirty = true;
            }

            // Remove Service
            removeService(index) {
                if (confirm('האם אתה בטוח שברצונך למחוק את השירות?')) {
                    this.siteData.services.splice(index, 1);
                    this.loadServices();
                    this.updateSiteInPreview();
                    this.isDirty = true;
                    
                    this.showNotification('שירות נמחק', 'success', 'השירות הוסר בהצלחה');
                }
            }

            // Load Media
            loadMedia() {
                const mediaGrid = document.getElementById('mediaGrid');
                mediaGrid.innerHTML = '';
                
                if (this.siteData.media && this.siteData.media.length > 0) {
                    this.siteData.media.forEach((mediaItem, index) => {
                        this.addMediaToDOM(mediaItem, index);
                    });
                }
            }

            // Handle File Upload
            handleFileUpload(event) {
                const files = Array.from(event.target.files);
                this.handleFiles(files);
            }

            // Handle Files
            handleFiles(files) {
                const validTypes = ['image/jpeg', 'image/png', 'image/gif', 'image/webp', 'video/mp4', 'video/webm'];
                const maxSize = 10 * 1024 * 1024; // 10MB
                
                files.forEach(file => {
                    if (!validTypes.includes(file.type)) {
                        this.showNotification('סוג קובץ לא נתמך', 'error', `${file.name} לא נתמך`);
                        return;
                    }
                    
                    if (file.size > maxSize) {
                        this.showNotification('קובץ גדול מדי', 'error', `${file.name} גדול מ-10MB`);
                        return;
                    }
                    
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        const mediaItem = {
                            id: Date.now() + Math.random(),
                            type: file.type.startsWith('image/') ? 'image' : 'video',
                            src: e.target.result,
                            name: file.name,
                            size: file.size
                        };
                        
                        if (!this.siteData.media) {
                            this.siteData.media = [];
                        }
                        
                        this.siteData.media.push(mediaItem);
                        this.addMediaToDOM(mediaItem, this.siteData.media.length - 1);
                        this.isDirty = true;
                    };
                    
                    reader.readAsDataURL(file);
                });
            }

            // Add Media to DOM
            addMediaToDOM(mediaItem, index) {
                const mediaGrid = document.getElementById('mediaGrid');
                
                const mediaDiv = document.createElement('div');
                mediaDiv.className = 'media-item';
                
                if (mediaItem.type === 'image') {
                    mediaDiv.innerHTML = `
                        <img src="${mediaItem.src}" alt="${mediaItem.name}">
                        <div class="media-item-overlay">
                            <i class="fas fa-eye" style="color: white; font-size: 20px;"></i>
                        </div>
                        <button class="media-item-delete" onclick="editor.removeMedia(${index})">
                            <i class="fas fa-times"></i>
                        </button>
                    `;
                }
                
                mediaGrid.appendChild(mediaDiv);
            }

            // Remove Media
            removeMedia(index) {
                this.siteData.media.splice(index, 1);
                this.loadMedia();
                this.isDirty = true;
            }

            // Search AI Images
            async searchAIImages() {
                const query = document.getElementById('aiSearchInput').value.trim();
                if (!query) {
                    this.showNotification('הכנס מילת חיפוש', 'warning', 'נדרשת מילת חיפוש');
                    return;
                }
                
                const resultsGrid = document.getElementById('aiResultsGrid');
                resultsGrid.innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 20px;"><div class="loading-spinner"></div></div>';
                
                try {
                    // Using Unsplash API for demo (replace with actual AI service)
                    const images = [];
                    for (let i = 1; i <= 8; i++) {
                        images.push({
                            id: i,
                            src: `https://source.unsplash.com/400x400/?${encodeURIComponent(query)}&sig=${i}`,
                            alt: query
                        });
                    }
                    
                    setTimeout(() => {
                        resultsGrid.innerHTML = '';
                        images.forEach(image => {
                            const imageDiv = document.createElement('div');
                            imageDiv.className = 'media-item';
                            imageDiv.innerHTML = `
                                <img src="${image.src}" alt="${image.alt}" onclick="editor.useAIImage('${image.src}', '${image.alt}')">
                                <div class="media-item-overlay">
                                    <i class="fas fa-plus" style="color: white; font-size: 20px;"></i>
                                </div>
                            `;
                            resultsGrid.appendChild(imageDiv);
                        });
                        
                        this.showNotification('תמונות נמצאו!', 'success', `נמצאו ${images.length} תמונות`);
                    }, 1000);
                    
                } catch (error) {
                    resultsGrid.innerHTML = '<div style="grid-column: 1/-1; text-align: center; color: var(--error-500);">שגיאה בחיפוש</div>';
                    this.showNotification('שגיאה בחיפוש', 'error', 'נסה שוב מאוחר יותר');
                }
            }

            // Use AI Image
            useAIImage(src, alt) {
                const mediaItem = {
                    id: Date.now(),
                    type: 'image',
                    src: src,
                    name: `AI Generated - ${alt}`,
                    size: 0
                };
                
                if (!this.siteData.media) {
                    this.siteData.media = [];
                }
                
                this.siteData.media.push(mediaItem);
                this.addMediaToDOM(mediaItem, this.siteData.media.length - 1);
                this.isDirty = true;
                
                this.showNotification('תמונה נוספה!', 'success', 'התמונה נוספה לגלריה');
            }

            // Update Site Data
            updateSiteData() {
                this.siteData.businessName = document.getElementById('businessName').value;
                this.siteData.businessDescription = document.getElementById('businessDescription').value;
                this.siteData.businessType = document.getElementById('businessType').value;
                this.siteData.fontFamily = document.getElementById('fontFamily').value;
                this.siteData.metaTitle = document.getElementById('metaTitle').value;
                this.siteData.metaDescription = document.getElementById('metaDescription').value;
                this.siteData.keywords = document.getElementById('keywords').value;
                
                this.updateSiteInPreview();
                this.isDirty = true;
            }

            // Update Site Colors
            updateSiteColors() {
                this.siteData.primaryColor = document.getElementById('primaryColor').value;
                this.siteData.secondaryColor = document.getElementById('secondaryColor').value;
                this.siteData.accentColor = document.getElementById('accentColor').value;
                
                this.updateSiteInPreview();
                this.isDirty = true;
            }

            // Load Site Preview
            loadSitePreview() {
                if (!this.currentSite) return;
                
                const iframe = document.getElementById('previewFrame');
                const loading = document.getElementById('previewLoading');
                
                loading.classList.remove('hidden');
                
                iframe.src = `./${this.currentSite}.html`;
                
                iframe.onload = () => {
                    loading.classList.add('hidden');
                    setTimeout(() => {
                        this.updateSiteInPreview();
                    }, 500);
                };
            }

            // Update Site in Preview
            updateSiteInPreview() {
                const iframe = document.getElementById('previewFrame');
                
                if (iframe.contentWindow) {
                    try {
                        iframe.contentWindow.postMessage({
                            type: 'updateSite',
                            data: this.siteData
                        }, '*');
                    } catch (e) {
                        console.log('Could not update preview:', e);
                    }
                }
            }

            // Save Site
            saveSite() {
                if (!this.currentSite) {
                    this.showNotification('בחר אתר', 'error', 'בחר אתר לשמירה');
                    return;
                }
                
                try {
                    localStorage.setItem(`siteData_${this.currentSite}`, JSON.stringify(this.siteData));
                    this.isDirty = false;
                    this.showNotification('נשמר בהצלחה!', 'success', 'השינויים נשמרו');
                } catch (error) {
                    this.showNotification('שגיאה בשמירה', 'error', 'נסה שוב');
                }
            }

            // Preview Site
            previewSite() {
                if (!this.currentSite) {
                    this.showNotification('בחר אתר', 'error', 'בחר אתר לתצוגה מקדימה');
                    return;
                }
                
                window.open(`./${this.currentSite}.html`, '_blank');
                this.showNotification('נפתח בחלון חדש', 'success', 'תצוגה מקדימה');
            }

            // Export Site
            exportSite() {
                if (!this.currentSite) {
                    this.showNotification('בחר אתר', 'error', 'בחר אתר לייצוא');
                    return;
                }
                
                const dataStr = JSON.stringify(this.siteData, null, 2);
                const dataBlob = new Blob([dataStr], { type: 'application/json' });
                
                const link = document.createElement('a');
                link.href = URL.createObjectURL(dataBlob);
                link.download = `${this.currentSite}-backup-${new Date().toISOString().split('T')[0]}.json`;
                link.click();
                
                this.showNotification('יוצא בהצלחה!', 'success', 'הקובץ הורד למחשב');
            }

            // Import Site
            importSite() {
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = '.json';
                
                input.onchange = (e) => {
                    const file = e.target.files[0];
                    if (!file) return;
                    
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        try {
                            const importedData = JSON.parse(e.target.result);
                            this.siteData = importedData;
                            this.populateForm();
                            this.loadServices();
                            this.loadMedia();
                            this.updateSiteInPreview();
                            this.isDirty = true;
                            this.showNotification('יובא בהצלחה!', 'success', 'הנתונים נטענו');
                        } catch (error) {
                            this.showNotification('שגיאה בקריאה', 'error', 'הקובץ פגום');
                        }
                    };
                    reader.readAsText(file);
                };
                
                input.click();
            }

            // Create New Site
            createNewSite() {
                const siteName = prompt('הכנס שם לאתר החדש:');
                if (!siteName) return;
                
                const siteKey = siteName.toLowerCase().replace(/\s+/g, '-').replace(/[^a-z0-9-]/g, '');
                
                // Check if site already exists
                if (document.querySelector(`[data-site="${siteKey}"]`)) {
                    this.showNotification('האתר כבר קיים', 'error', 'בחר שם אחר');
                    return;
                }
                
                // Create new site item
                const siteList = document.getElementById('siteList');
                const newSiteItem = document.createElement('li');
                newSiteItem.className = 'site-item';
                newSiteItem.dataset.site = siteKey;
                newSiteItem.innerHTML = `
                    <div class="site-icon">
                        <i class="fas fa-globe"></i>
                    </div>
                    <span class="site-name">${siteName}</span>
                    <div class="site-status"></div>
                `;
                
                newSiteItem.addEventListener('click', () => {
                    this.selectSite(siteKey);
                });
                
                siteList.appendChild(newSiteItem);
                
                // Initialize with default data
                this.siteData = this.getDefaultSiteData('other');
                this.siteData.businessName = siteName;
                
                this.selectSite(siteKey);
                this.showNotification('אתר חדש נוצר!', 'success', `${siteName} מוכן לעריכה`);
            }

            // Duplicate Site
            duplicateSite() {
                if (!this.currentSite) {
                    this.showNotification('בחר אתר', 'error', 'בחר אתר לשכפול');
                    return;
                }
                
                const newName = prompt('הכנס שם לאתר המשוכפל:');
                if (!newName) return;
                
                const newSiteKey = newName.toLowerCase().replace(/\s+/g, '-').replace(/[^a-z0-9-]/g, '');
                
                // Save duplicated data
                const duplicatedData = { ...this.siteData };
                duplicatedData.businessName = newName;
                localStorage.setItem(`siteData_${newSiteKey}`, JSON.stringify(duplicatedData));
                
                this.showNotification('אתר שוכפל!', 'success', `${newName} נוצר בהצלחה`);
            }

            // Auto Save
            startAutoSave() {
                this.autoSaveInterval = setInterval(() => {
                    if (this.isDirty && this.currentSite) {
                        this.saveSite();
                        console.log('Auto-saved:', this.currentSite);
                    }
                }, 30000); // Every 30 seconds
            }

            // Load Default Site
            loadDefaultSite() {
                const firstSite = document.querySelector('.site-item');
                if (firstSite) {
                    this.selectSite(firstSite.dataset.site);
                }
            }

            // Utility Functions
            getSiteDisplayName(siteName) {
                const displayNames = {
                    'dr-michal-rosen': 'ד"ר מיכל רוזן',
                    'law-firm': 'משרד עורכי דין',
                    'fitness-co': 'Fitness Co',
                    'tech-startup': 'Tech Startup',
                    'restaurant': 'מסעדת השף'
                };
                return displayNames[siteName] || siteName;
            }

            isValidHexColor(color) {
                return /^#[0-9A-F]{6}$/i.test(color);
            }

            // Keyboard Shortcuts
            handleKeyboardShortcuts(e) {
                if (e.ctrlKey || e.metaKey) {
                    switch (e.key) {
                        case 's':
                            e.preventDefault();
                            this.saveSite();
                            break;
                        case 'p':
                            e.preventDefault();
                            this.previewSite();
                            break;
                        case 'n':
                            e.preventDefault();
                            this.createNewSite();
                            break;
                        case 'd':
                            e.preventDefault();
                            this.duplicateSite();
                            break;
                    }
                }
            }

            // Notification System
            showNotification(title, type = 'success', message = '') {
                const notification = document.createElement('div');
                notification.className = `notification ${type}`;
                
                const iconMap = {
                    success: 'fas fa-check',
                    error: 'fas fa-exclamation-triangle',
                    warning: 'fas fa-exclamation-circle',
                    info: 'fas fa-info-circle'
                };
                
                notification.innerHTML = `
                    <div class="notification-icon">
                        <i class="${iconMap[type]}"></i>
                    </div>
                    <div class="notification-content">
                        <div class="notification-title">${title}</div>
                        ${message ? `<div class="notification-message">${message}</div>` : ''}
                    </div>
                `;
                
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.classList.add('show');
                }, 100);
                
                setTimeout(() => {
                    notification.classList.remove('show');
                    setTimeout(() => {
                        document.body.removeChild(notification);
                    }, 300);
                }, 3000);
            }
        }

        // Toggle Section Function
        function toggleSection(sectionName) {
            const section = document.getElementById(`${sectionName}Section`);
            const toggle = section.querySelector('.form-section-toggle');
            
            section.classList.toggle('collapsed');
            
            if (section.classList.contains('collapsed')) {
                toggle.style.transform = 'rotate(-90deg)';
            } else {
                toggle.style.transform = 'rotate(0deg)';
            }
        }

        // Initialize Editor
        let editor;
        document.addEventListener('DOMContentLoaded', () => {
            editor = new WebMasterEditor();
        });

        // Handle beforeunload
        window.addEventListener('beforeunload', (e) => {
            if (editor && editor.isDirty) {
                e.preventDefault();
                e.returnValue = 'יש לך שינויים לא שמורים. האם אתה בטוח שברצונך לעזוב?';
            }
        });
    </script>
</body>
</html> fa-times"></i>
                        </button>
                    `;
                } else {
                    mediaDiv.innerHTML = `
                        <video src="${mediaItem.src}" muted></video>
                        <div class="media-item-overlay">
                            <i class="fas fa-play" style="color: white; font-size: 20px;"></i>
                        </div>
                        <button class="media-item-delete" onclick="editor.removeMedia(${index})">
                            <i class="fas
