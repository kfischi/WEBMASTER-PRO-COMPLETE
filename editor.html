<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebMaster Pro - אדיטור ויזואלי מהפכני</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Heebo', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            overflow: hidden;
            height: 100vh;
        }

        /* ===== כותרת עליונה ===== */
        .header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            z-index: 1000;
        }

        .logo {
            font-size: 24px;
            font-weight: 700;
            color: white;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .header-controls {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .website-selector {
            padding: 8px 16px;
            border: none;
            border-radius: 25px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            font-weight: 500;
            backdrop-filter: blur(10px);
            cursor: pointer;
            transition: all 0.3s;
        }

        .website-selector:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .header-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 25px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
            backdrop-filter: blur(10px);
        }

        .header-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .quick-demo-btn {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255, 107, 107, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(255, 107, 107, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 107, 107, 0); }
        }

        /* ===== פריסה ראשית ===== */
        .main-layout {
            display: flex;
            height: calc(100vh - 80px);
        }

        /* ===== פאנל שמאלי - כלי עריכה ===== */
        .left-panel {
            width: 320px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-right: 1px solid rgba(255, 255, 255, 0.2);
            overflow-y: auto;
            padding: 20px;
        }

        .panel-section {
            margin-bottom: 25px;
        }

        .panel-title {
            color: white;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* גלריית אתרים */
        .websites-gallery {
            display: grid;
            gap: 12px;
            max-height: 300px;
            overflow-y: auto;
        }

        .website-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .website-card:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .website-card.active {
            background: linear-gradient(45deg, #667eea, #764ba2);
            border-color: rgba(255, 255, 255, 0.5);
        }

        .website-name {
            color: white;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .website-category {
            color: rgba(255, 255, 255, 0.8);
            font-size: 12px;
            background: rgba(255, 255, 255, 0.1);
            padding: 2px 8px;
            border-radius: 10px;
            display: inline-block;
        }

        .website-status {
            position: absolute;
            top: 10px;
            left: 10px;
            background: #4CAF50;
            color: white;
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 8px;
        }

        /* כלי עיצוב */
        .design-tools {
            display: grid;
            gap: 15px;
        }

        .color-palette {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            margin: 10px 0;
        }

        .color-btn {
            width: 40px;
            height: 40px;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .color-btn:hover {
            transform: scale(1.2);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        .font-controls, .layout-controls {
            display: grid;
            gap: 10px;
        }

        .control-group {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .control-btn {
            padding: 8px 12px;
            border: none;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 12px;
        }

        .control-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .control-btn.active {
            background: linear-gradient(45deg, #667eea, #764ba2);
        }

        /* ===== אזור מרכזי - תצוגת האתר ===== */
        .center-panel {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: rgba(255, 255, 255, 0.05);
        }

        .viewport-controls {
            padding: 15px 20px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .device-selector {
            display: flex;
            gap: 10px;
        }

        .device-btn {
            padding: 8px 12px;
            border: none;
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 12px;
        }

        .device-btn.active {
            background: linear-gradient(45deg, #667eea, #764ba2);
        }

        .zoom-controls {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .zoom-btn {
            width: 32px;
            height: 32px;
            border: none;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .zoom-level {
            color: white;
            font-weight: 500;
            min-width: 50px;
            text-align: center;
        }

        .website-viewport {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            position: relative;
        }

        .website-frame {
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
            transition: all 0.5s;
            max-width: 100%;
            max-height: 100%;
        }

        .website-frame.desktop {
            width: 1200px;
            height: 800px;
        }

        .website-frame.tablet {
            width: 768px;
            height: 1024px;
        }

        .website-frame.mobile {
            width: 375px;
            height: 667px;
        }

        .website-iframe {
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 15px;
        }

        /* ===== פאנל ימני - מאפיינים ו-AI ===== */
        .right-panel {
            width: 350px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-left: 1px solid rgba(255, 255, 255, 0.2);
            padding: 20px;
            overflow-y: auto;
        }

        /* עוזר AI */
        .ai-assistant {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 25px;
            color: white;
        }

        .ai-title {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .ai-chat {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            max-height: 200px;
            overflow-y: auto;
        }

        .ai-input {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 25px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            placeholder-color: rgba(255, 255, 255, 0.7);
            margin-bottom: 10px;
        }

        .ai-input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .ai-suggestions {
            display: grid;
            gap: 8px;
        }

        .suggestion-btn {
            padding: 8px 12px;
            border: none;
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            cursor: pointer;
            font-size: 12px;
            text-align: right;
            transition: all 0.3s;
        }

        .suggestion-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateX(-5px);
        }

        /* אינספקטור אלמנטים */
        .element-inspector {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
        }

        .inspector-title {
            color: white;
            font-weight: 600;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .property-group {
            margin-bottom: 20px;
        }

        .property-label {
            color: rgba(255, 255, 255, 0.9);
            font-size: 14px;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .property-input {
            width: 100%;
            padding: 10px;
            border: none;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            margin-bottom: 10px;
        }

        .property-input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        /* הודעות מערכת */
        .system-messages {
            position: fixed;
            top: 100px;
            left: 20px;
            z-index: 2000;
            display: grid;
            gap: 10px;
        }

        .message {
            background: rgba(255, 255, 255, 0.95);
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            backdrop-filter: blur(20px);
            border-right: 4px solid #4CAF50;
            animation: slideIn 0.5s ease;
            max-width: 350px;
        }

        .message.error {
            border-right-color: #f44336;
            background: rgba(255, 235, 235, 0.95);
        }

        .message.warning {
            border-right-color: #ff9800;
            background: rgba(255, 248, 225, 0.95);
        }

        @keyframes slideIn {
            from {
                transform: translateX(-100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* ברוכים הבאים */
        .welcome-message {
            text-align: center;
            color: white;
            padding: 60px 40px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            margin: 40px;
            backdrop-filter: blur(20px);
        }

        .welcome-title {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 15px;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .welcome-subtitle {
            font-size: 18px;
            margin-bottom: 30px;
            opacity: 0.9;
        }

        .features-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .feature-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .feature-icon {
            font-size: 24px;
            margin-bottom: 10px;
            color: #667eea;
        }

        .feature-title {
            font-weight: 600;
            margin-bottom: 8px;
        }

        .feature-desc {
            font-size: 14px;
            opacity: 0.8;
            line-height: 1.5;
        }

        /* עמדון תחתון */
        .status-bar {
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(20px);
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: white;
            font-size: 12px;
        }

        .status-left {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .status-right {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #4CAF50;
            animation: blink 2s infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.5);
        }
    </style>
</head>
<body>
    <!-- כותרת עליונה -->
    <header class="header">
        <div class="logo">
            <i class="fas fa-magic"></i> WebMaster Pro
        </div>
        <div class="header-controls">
            <select class="website-selector" id="websiteSelector">
                <option value="">בחר אתר לעריכה...</option>
            </select>
            <button class="header-btn quick-demo-btn" onclick="quickDemo()">
                <i class="fas fa-rocket"></i> דמו מהיר
            </button>
            <button class="header-btn" onclick="saveProject()">
                <i class="fas fa-save"></i> שמור
            </button>
            <button class="header-btn" onclick="exportProject()">
                <i class="fas fa-download"></i> ייצא
            </button>
            <button class="header-btn" onclick="previewProject()">
                <i class="fas fa-eye"></i> תצוגה מקדימה
            </button>
        </div>
    </header>

    <!-- פריסה ראשית -->
    <div class="main-layout">
        <!-- פאנל שמאלי - כלי עריכה -->
        <div class="left-panel">
            <!-- גלריית אתרים -->
            <div class="panel-section">
                <h3 class="panel-title">
                    <i class="fas fa-globe"></i>
                    האתרים שלי (11)
                </h3>
                <div class="websites-gallery" id="websitesGallery">
                    <!-- האתרים יטענו כאן דינמית -->
                </div>
            </div>

            <!-- כלי עיצוב -->
            <div class="panel-section">
                <h3 class="panel-title">
                    <i class="fas fa-palette"></i>
                    עיצוב וצבעים
                </h3>
                <div class="design-tools">
                    <div class="color-palette" id="colorPalette">
                        <!-- צבעים דינמיים -->
                    </div>
                    <button class="control-btn" onclick="generateNewPalette()">
                        <i class="fas fa-sync"></i> פלטה חדשה
                    </button>
                </div>
            </div>

            <!-- טיפוגרפיה -->
            <div class="panel-section">
                <h3 class="panel-title">
                    <i class="fas fa-font"></i>
                    טיפוגרפיה
                </h3>
                <div class="font-controls">
                    <div class="control-group">
                        <button class="control-btn" onclick="changeFontSize('increase')">A+</button>
                        <button class="control-btn" onclick="changeFontSize('decrease')">A-</button>
                        <button class="control-btn" onclick="toggleBold()">B</button>
                        <button class="control-btn" onclick="toggleItalic()">I</button>
                    </div>
                </div>
            </div>

            <!-- פריסה -->
            <div class="panel-section">
                <h3 class="panel-title">
                    <i class="fas fa-th-large"></i>
                    פריסה ועמודות
                </h3>
                <div class="layout-controls">
                    <div class="control-group">
                        <button class="control-btn" onclick="setColumns(1)">1 עמודה</button>
                        <button class="control-btn" onclick="setColumns(2)">2 עמודות</button>
                        <button class="control-btn" onclick="setColumns(3)">3 עמודות</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- אזור מרכזי - תצוגת האתר -->
        <div class="center-panel">
            <!-- בקרות תצוגה -->
            <div class="viewport-controls">
                <div class="device-selector">
                    <button class="device-btn active" onclick="setDevice('desktop')">
                        <i class="fas fa-desktop"></i> Desktop
                    </button>
                    <button class="device-btn" onclick="setDevice('tablet')">
                        <i class="fas fa-tablet-alt"></i> Tablet
                    </button>
                    <button class="device-btn" onclick="setDevice('mobile')">
                        <i class="fas fa-mobile-alt"></i> Mobile
                    </button>
                </div>
                <div class="zoom-controls">
                    <button class="zoom-btn" onclick="zoomOut()">
                        <i class="fas fa-minus"></i>
                    </button>
                    <span class="zoom-level" id="zoomLevel">100%</span>
                    <button class="zoom-btn" onclick="zoomIn()">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
            </div>

            <!-- תצוגת האתר -->
            <div class="website-viewport">
                <div class="website-frame desktop" id="websiteFrame">
                    <div class="welcome-message" id="welcomeMessage">
                        <h1 class="welcome-title">ברוכים הבאים ל-WebMaster Pro</h1>
                        <p class="welcome-subtitle">האדיטור הויזואלי המתקדם ביותר לבניית אתרים מקצועיים</p>
                        
                        <div class="features-list">
                            <div class="feature-item">
                                <div class="feature-icon">🎨</div>
                                <div class="feature-title">עיצוב בזמן אמת</div>
                                <div class="feature-desc">שנה צבעים, פונטים ופריסה וראה את התוצאות מיידית</div>
                            </div>
                            <div class="feature-item">
                                <div class="feature-icon">🤖</div>
                                <div class="feature-title">עוזר AI חכם</div>
                                <div class="feature-desc">קבל הצעות לשיפור עיצוב ותוכן בעזרת בינה מלאכותית</div>
                            </div>
                            <div class="feature-item">
                                <div class="feature-icon">📱</div>
                                <div class="feature-title">רספונסיבי מושלם</div>
                                <div class="feature-desc">עבוד על 3 מכשירים בו-זמנית ותראה איך האתר נראה</div>
                            </div>
                            <div class="feature-item">
                                <div class="feature-icon">⚡</div>
                                <div class="feature-title">11 אתרים מוכנים</div>
                                <div class="feature-desc">התחל עם אתרים מקצועיים בשווי ₪26,900</div>
                            </div>
                        </div>
                        
                        <p style="margin-top: 30px; opacity: 0.8;">
                            👈 בחר אתר מהגלריה השמאלית או לחץ על "דמו מהיר" להתחלה מהירה
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- פאנל ימני - מאפיינים ו-AI -->
        <div class="right-panel">
            <!-- עוזר AI -->
            <div class="ai-assistant">
                <h3 class="ai-title">
                    <i class="fas fa-robot"></i>
                    עוזר AI חכם
                </h3>
                <div class="ai-chat" id="aiChat">
                    <p style="opacity: 0.8; font-size: 14px;">שלום! אני העוזר הדיגיטלי שלך. שאל אותי כל שאלה על עיצוב, תוכן או אופטימיזציה של האתר.</p>
                </div>
                <input type="text" class="ai-input" id="aiInput" placeholder="שאל אותי כל שאלה..." onkeypress="handleAIInput(event)">
                <div class="ai-suggestions">
                    <button class="suggestion-btn" onclick="askAI('איך לשפר את העיצוב?')">איך לשפר את העיצוב?</button>
                    <button class="suggestion-btn" onclick="askAI('שנה את הצבעים')">שנה את הצבעים</button>
                    <button class="suggestion-btn" onclick="askAI('כתוב תוכן חדש')">כתוב תוכן חדש</button>
                    <button class="suggestion-btn" onclick="askAI('אופטם את הביצועים')">אופטם את הביצועים</button>
                </div>
            </div>

            <!-- אינספקטור אלמנטים -->
            <div class="element-inspector">
                <h3 class="inspector-title">
                    <i class="fas fa-search"></i>
                    אינספקטור אלמנטים
                </h3>
                <div id="elementProperties">
                    <p style="color: rgba(255,255,255,0.7); font-size: 14px; text-align: center; padding: 20px;">
                        לחץ על אלמנט באתר כדי לערוך את המאפיינים שלו
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- עמדון תחתון -->
    <div class="status-bar">
        <div class="status-left">
            <div class="status-indicator">
                <div class="status-dot"></div>
                <span>האדיטור פעיל</span>
            </div>
            <span id="currentWebsite">לא נבחר אתר</span>
            <span id="lastSaved">שמירה אחרונה: אף פעם</span>
        </div>
        <div class="status-right">
            <span>גרסה 2.0</span>
            <span>11 אתרים במערכת</span>
            <span>שווי: ₪26,900</span>
        </div>
    </div>

    <!-- הודעות מערכת -->
    <div class="system-messages" id="systemMessages"></div>

    <script>
        // נתוני האתרים המקצועיים
        const websites = [
            {
                id: 'dr-michal-rosen',
                name: 'ד"ר מיכל רוזן',
                category: 'אסתטיקה רפואית',
                price: 2800,
                colors: ['#ff6b9d', '#c44569', '#f8b500', '#ffffff'],
                status: 'מוכן'
            },
            {
                id: 'law-firm',
                name: 'משרד ברקוביץ',
                category: 'שירותים משפטיים',
                price: 2500,
                colors: ['#2c3e50', '#34495e', '#95a5a6', '#ecf0f1'],
                status: 'מוכן'
            },
            {
                id: 'fitness-co',
                name: 'דני פיט',
                category: 'אימון כושר',
                price: 2200,
                colors: ['#e74c3c', '#c0392b', '#f39c12', '#ffffff'],
                status: 'מוכן'
            },
            {
                id: 'yoga-studio',
                name: 'סטודיו אוהם',
                category: 'יוגה ומדיטציה',
                price: 1900,
                colors: ['#27ae60', '#2ecc71', '#f1c40f', '#ffffff'],
                status: 'מוכן'
            },
            {
                id: 'nutritionist',
                name: 'ד"ר שרה כהן',
                category: 'תזונה קלינית',
                price: 2400,
                colors: ['#27ae60', '#2ecc71', '#f39c12', '#ffffff'],
                status: 'מוכן'
            },
            {
                id: 'accountant',
                name: 'רינה לוי CPA',
                category: 'חשבות שכר',
                price: 2000,
                colors: ['#3498db', '#2980b9', '#f39c12', '#ffffff'],
                status: 'מוכן'
            },
            {
                id: 'beauty-salon',
                name: 'מספרה BELLA',
                category: 'יופי ועיצוב שיער',
                price: 1700,
                colors: ['#e91e63', '#ad1457', '#ffeb3b', '#ffffff'],
                status: 'מוכן'
            },
            {
                id: 'tutor',
                name: 'ד"ר רונית לוי',
                category: 'חינוך ולימודים',
                price: 2100,
                colors: ['#9c27b0', '#7b1fa2', '#ff9800', '#ffffff'],
                status: 'מוכן'
            },
            {
                id: 'aesthetic-clinic',
                name: 'קליניקת יופי פרמיום',
                category: 'אסתטיקה רפואית',
                price: 3200,
                colors: ['#6a1b9a', '#4a148c', '#ff6f00', '#ffffff'],
                status: 'מוכן'
            },
            {
                id: 'multibrawn',
                name: 'מולטיבראון',
                category: 'נופש ואירועים',
                price: 2300,
                colors: ['#00bcd4', '#0097a7', '#ffc107', '#ffffff'],
                status: 'מוכן'
            },
            {
                id: 'real-estate',
                name: 'נדל"ן פרמיום',
                category: 'נדל"ן והשקעות',
                price: 2700,
                colors: ['#795548', '#5d4037', '#ff9800', '#ffffff'],
                status: 'מוכן'
            }
        ];

        // משתנים גלובליים
        let currentWebsite = null;
        let currentDevice = 'desktop';
        let currentZoom = 100;
        let selectedElement = null;
        let autoSaveInterval = null;

        // אתחול המערכת
        document.addEventListener('DOMContentLoaded', function() {
            initializeEditor();
            loadWebsitesGallery();
            generateColorPalette();
            setupAutoSave();
            showMessage('האדיטור נטען בהצלחה! בחר אתר להתחלה.', 'success');
        });

        // אתחול האדיטור
        function initializeEditor() {
            console.log('🚀 WebMaster Pro Editor מתחיל...');
            
            // טעינת רשימת אתרים לסלקטור
            const selector = document.getElementById('websiteSelector');
            websites.forEach(website => {
                const option = document.createElement('option');
                option.value = website.id;
                option.textContent = website.name + ' - ' + website.category;
                selector.appendChild(option);
            });

            // מאזין לשינוי אתר
            selector.addEventListener('change', function() {
                if (this.value) {
                    loadWebsite(this.value);
                }
            });

            console.log('✅ האדיטור הושלם בהצלחה!');
        }

        // טעינת גלריית האתרים
        function loadWebsitesGallery() {
            const gallery = document.getElementById('websitesGallery');
            gallery.innerHTML = '';

            websites.forEach(website => {
                const card = document.createElement('div');
                card.className = 'website-card';
                card.onclick = () => loadWebsite(website.id);
                
                card.innerHTML = `
                    <div class="website-status">${website.status}</div>
                    <div class="website-name">${website.name}</div>
                    <div class="website-category">${website.category}</div>
                `;
                
                gallery.appendChild(card);
            });
        }

        // יצירת פלטת צבעים דינמית
        function generateColorPalette() {
            const palette = document.getElementById('colorPalette');
            palette.innerHTML = '';
            
            const colors = [
                '#667eea', '#764ba2', '#f093fb', '#f5576c',
                '#4facfe', '#00f2fe', '#43e97b', '#38f9d7',
                '#ffecd2', '#fcb69f', '#a8edea', '#fed6e3'
            ];
            
            colors.forEach(color => {
                const btn = document.createElement('button');
                btn.className = 'color-btn';
                btn.style.backgroundColor = color;
                btn.onclick = () => applyColor(color);
                palette.appendChild(btn);
            });
        }

        // טעינת אתר
        function loadWebsite(websiteId) {
            console.log('🌐 טוען אתר:', websiteId);
            
            const website = websites.find(w => w.id === websiteId);
            if (!website) {
                showMessage('שגיאה: אתר לא נמצא', 'error');
                return;
            }

            currentWebsite = website;
            
            // עדכון UI
            updateActiveWebsiteCard(websiteId);
            updateWebsiteSelector(websiteId);
            updateStatusBar(website.name);
            
            // יצירת HTML של האתר
            const websiteHTML = generateWebsiteHTML(website);
            
            // טעינה ל-iframe
            const frame = document.getElementById('websiteFrame');
            frame.innerHTML = `<iframe class="website-iframe" srcdoc="${websiteHTML.replace(/"/g, '&quot;')}" id="websiteIframe"></iframe>`;
            
            // הוספת מאזינים
            setTimeout(() => {
                setupWebsiteInteraction();
            }, 1000);
            
            showMessage(`אתר ${website.name} נטען בהצלחה!`, 'success');
        }

        // יצירת HTML של אתר
        function generateWebsiteHTML(website) {
            const services = generateServices(website.category);
            const testimonials = generateTestimonials();
            const faqs = generateFAQs(website.category);
            
            return `
<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${website.name} - ${website.category}</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            line-height: 1.6; 
            color: #333;
            background: linear-gradient(135deg, ${website.colors[0]}, ${website.colors[1]});
        }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        
        /* Header */
        .header {
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(20px);
            padding: 15px 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
        }
        .nav { display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 24px; font-weight: bold; color: ${website.colors[0]}; }
        .nav-links { display: flex; list-style: none; gap: 30px; }
        .nav-links a { text-decoration: none; color: #333; font-weight: 500; transition: all 0.3s; }
        .nav-links a:hover { color: ${website.colors[0]}; }
        
        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, ${website.colors[0]}, ${website.colors[1]});
            color: white;
            padding: 120px 0 80px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.1);
        }
        .hero-content {
            position: relative;
            z-index: 2;
        }
        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 20px;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }
        .hero p {
            font-size: 1.3rem;
            margin-bottom: 30px;
            opacity: 0.9;
        }
        .cta-btn {
            background: ${website.colors[2]};
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 30px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
        }
        .cta-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        /* Services */
        .services {
            padding: 80px 0;
            background: rgba(255,255,255,0.95);
        }
        .section-title {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 50px;
            color: ${website.colors[0]};
        }
        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }
        .service-card {
            background: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: all 0.3s;
            border-top: 4px solid ${website.colors[0]};
        }
        .service-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }
        .service-icon {
            font-size: 3rem;
            color: ${website.colors[0]};
            margin-bottom: 20px;
        }
        .service-card h3 {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: #333;
        }
        .service-card p {
            color: #666;
            line-height: 1.6;
        }
        
        /* About */
        .about {
            padding: 80px 0;
            background: linear-gradient(135deg, ${website.colors[1]}, ${website.colors[0]});
            color: white;
        }
        .about-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 50px;
            align-items: center;
        }
        .about-text h2 {
            font-size: 2.5rem;
            margin-bottom: 20px;
        }
        .about-text p {
            font-size: 1.1rem;
            line-height: 1.8;
            margin-bottom: 20px;
        }
        .about-image {
            text-align: center;
        }
        .about-image img {
            width: 300px;
            height: 300px;
            border-radius: 50%;
            object-fit: cover;
            border: 5px solid rgba(255,255,255,0.2);
        }
        
        /* Contact */
        .contact {
            padding: 80px 0;
            background: rgba(255,255,255,0.95);
        }
        .contact-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 50px;
        }
        .contact-form {
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #333;
        }
        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #eee;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s;
        }
        .form-group input:focus,
        .form-group textarea:focus {
            border-color: ${website.colors[0]};
            outline: none;
        }
        .contact-info {
            padding: 20px;
        }
        .contact-item {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding: 15px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .contact-item i {
            font-size: 1.5rem;
            color: ${website.colors[0]};
            margin-left: 15px;
            width: 30px;
        }
        
        /* Footer */
        .footer {
            background: #333;
            color: white;
            text-align: center;
            padding: 40px 0;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .hero h1 { font-size: 2.5rem; }
            .about-content { grid-template-columns: 1fr; }
            .contact-content { grid-template-columns: 1fr; }
            .nav-links { display: none; }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="nav container">
            <div class="logo" data-editable="true">${website.name}</div>
            <ul class="nav-links">
                <li><a href="#home">בית</a></li>
                <li><a href="#services">שירותים</a></li>
                <li><a href="#about">אודות</a></li>
                <li><a href="#contact">צור קשר</a></li>
            </ul>
        </nav>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="container">
            <div class="hero-content">
                <h1 data-editable="true">ברוכים הבאים ל${website.name}</h1>
                <p data-editable="true">המקום הטוב ביותר ל${website.category} ברמה הגבוהה ביותר</p>
                <a href="#contact" class="cta-btn" data-editable="true">צור קשר עכשיו</a>
            </div>
        </div>
    </section>

    <!-- Services -->
    <section class="services" id="services">
        <div class="container">
            <h2 class="section-title" data-editable="true">השירותים שלנו</h2>
            <div class="services-grid">
                ${services}
            </div>
        </div>
    </section>

    <!-- About -->
    <section class="about" id="about">
        <div class="container">
            <div class="about-content">
                <div class="about-text">
                    <h2 data-editable="true">קצת עליי</h2>
                    <p data-editable="true">אני מתמחה ב${website.category} כבר למעלה מ-10 שנים ומביא ללקוחותיי את השירות הטוב ביותר עם תוצאות מוכחות ומקצועיות ברמה הגבוהה ביותר.</p>
                    <p data-editable="true">המטרה שלי היא לספק שירות אישי ומותאם לכל לקוח, תוך הבטחת איכות גבוהה ושביעות רצון מלאה.</p>
                </div>
                <div class="about-image">
                    <img src="https://i.postimg.cc/7YhzqWq8/professional-person.jpg" alt="${website.name}">
                </div>
            </div>
        </div>
    </section>

    <!-- Contact -->
    <section class="contact" id="contact">
        <div class="container">
            <h2 class="section-title" data-editable="true">צור קשר</h2>
            <div class="contact-content">
                <div class="contact-form">
                    <form>
                        <div class="form-group">
                            <label>שם מלא</label>
                            <input type="text" required>
                        </div>
                        <div class="form-group">
                            <label>טלפון</label>
                            <input type="tel" required>
                        </div>
                        <div class="form-group">
                            <label>אימייל</label>
                            <input type="email" required>
                        </div>
                        <div class="form-group">
                            <label>הודעה</label>
                            <textarea rows="5" required></textarea>
                        </div>
                        <button type="submit" class="cta-btn">שלח הודעה</button>
                    </form>
                </div>
                <div class="contact-info">
                    <div class="contact-item">
                        <i class="fas fa-phone"></i>
                        <span data-editable="true">054-123-4567</span>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-envelope"></i>
                        <span data-editable="true">info@${website.id}.co.il</span>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-map-marker-alt"></i>
                        <span data-editable="true">תל אביב, ישראל</span>
                    </div>
                    <div class="contact-item">
                        <i class="fab fa-whatsapp"></i>
                        <span data-editable="true">WhatsApp: 054-123-4567</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p data-editable="true">&copy; 2025 ${website.name}. כל הזכויות שמורות.</p>
        </div>
    </footer>

    <!-- JavaScript for Communication -->
    <script>
        // תקשורת עם האדיטור הראשי
        document.addEventListener('click', function(e) {
            if (e.target.hasAttribute('data-editable')) {
                e.preventDefault();
                window.parent.postMessage({
                    type: 'elementSelected',
                    element: e.target.tagName,
                    content: e.target.textContent,
                    id: e.target.id || 'no-id'
                }, '*');
            }
        });

        // עריכה בזמן אמת
        window.addEventListener('message', function(e) {
            if (e.data.type === 'updateContent') {
                const elements = document.querySelectorAll('[data-editable]');
                elements.forEach(el => {
                    if (el.textContent === e.data.oldContent) {
                        el.textContent = e.data.newContent;
                    }
                });
            }
        });
    </script>
</body>
</html>`;
        }

        // יצירת שירותים לפי קטגוריה
        function generateServices(category) {
            const servicesByCategory = {
                'אסתטיקה רפואית': [
                    { icon: 'fas fa-syringe', name: 'זריקות בוטוקס', desc: 'הזרקות מקצועיות להחלקת קמטים' },
                    { icon: 'fas fa-magic', name: 'מילוי שפתיים', desc: 'מילוי טבעי ומקצועי לשפתיים' },
                    { icon: 'fas fa-star', name: 'טיפולי פנים', desc: 'טיפולי פנים מתקדמים ומרגיעים' },
                    { icon: 'fas fa-sun', name: 'הסרת כתמי גיל', desc: 'טיפולים להסרת כתמי גיל בלייזר' },
                    { icon: 'fas fa-leaf', name: 'ייעוץ אסתטי', desc: 'ייעוץ מקצועי להתאמת טיפולים' },
                    { icon: 'fas fa-heart', name: 'טיפולי נגד הזדקנות', desc: 'טיפולים מתקדמים להאטת הזדקנות' }
                ],
                'שירותים משפטיים': [
                    { icon: 'fas fa-gavel', name: 'דיני עבודה', desc: 'ייצוג משפטי בתחום דיני העבודה' },
                    { icon: 'fas fa-home', name: 'דיני נדל"ן', desc: 'ליווי עסקאות נדל"ן וחוזים' },
                    { icon: 'fas fa-family', name: 'דיני משפחה', desc: 'גירושין, מזונות וחלוקת רכוש' },
                    { icon: 'fas fa-briefcase', name: 'דיני מסחר', desc: 'הקמת חברות וחוזים מסחריים' },
                    { icon: 'fas fa-shield-alt', name: 'דיני פלילים', desc: 'ייצוג בהליכים פליליים' },
                    { icon: 'fas fa-handshake', name: 'גישור ובוררות', desc: 'פתרון סכסוכים ללא בית משפט' }
                ],
                'אימון כושר': [
                    { icon: 'fas fa-dumbbell', name: 'אימון אישי', desc: 'אימון אישי מותאם ומקצועי' },
                    { icon: 'fas fa-users', name: 'אימון קבוצתי', desc: 'אימונים קבוצתיים מעצבים' },
                    { icon: 'fas fa-apple-alt', name: 'תזונה ספורטיבית', desc: 'ייעוץ תזונתי מקצועי לספורטאים' },
                    { icon: 'fas fa-chart-line', name: 'תוכנית אימונים', desc: 'תוכנית אימונים אישית מפורטת' },
                    { icon: 'fas fa-medal', name: 'הכנה לתחרויות', desc: 'הכנה מקצועית לתחרויות כושר' },
                    { icon: 'fas fa-clock', name: 'אימוני HIIT', desc: 'אימונים אינטנסיביים קצרים ויעילים' }
                ]
            };

            const defaultServices = [
                { icon: 'fas fa-star', name: 'שירות מקצועי', desc: 'שירות ברמה הגבוהה ביותר' },
                { icon: 'fas fa-heart', name: 'שירות אישי', desc: 'התאמה אישית לכל לקוח' },
                { icon: 'fas fa-shield-alt', name: 'אמינות מוכחת', desc: 'מוניטין של שנים רבות' },
                { icon: 'fas fa-clock', name: 'זמינות גבוהה', desc: 'שירות מהיר ויעיל' },
                { icon: 'fas fa-trophy', name: 'תוצאות מעולות', desc: 'השגת המטרות בהצלחה' },
                { icon: 'fas fa-handshake', name: 'שירות לקוחות', desc: 'יחס אישי וחם לכל לקוח' }
            ];

            const services = servicesByCategory[category] || defaultServices;
            
            return services.map(service => `
                <div class="service-card">
                    <div class="service-icon">
                        <i class="${service.icon}"></i>
                    </div>
                    <h3 data-editable="true">${service.name}</h3>
                    <p data-editable="true">${service.desc}</p>
                </div>
            `).join('');
        }

        // יצירת המלצות
        function generateTestimonials() {
            const testimonials = [
                { name: 'יעל כהן', text: 'השירות מעולה והתוצאות מדהימות!' },
                { name: 'דוד לוי', text: 'מקצועיות ברמה הגבוהה ביותר' },
                { name: 'מיכל רוזן', text: 'הייתי מאוד מרוצה מהשירות' }
            ];

            return testimonials.map(t => `
                <div class="testimonial-card">
                    <p data-editable="true">"${t.text}"</p>
                    <h4 data-editable="true">${t.name}</h4>
                </div>
            `).join('');
        }

        // יצירת שאלות נפוצות
        function generateFAQs(category) {
            return `
                <div class="faq-item">
                    <h4 data-editable="true">כמה זמן לוקח הטיפול?</h4>
                    <p data-editable="true">הטיפול לוקח בין 30 דקות לשעה תלוי בסוג השירות.</p>
                </div>
            `;
        }

        // עדכון כרטיס אתר פעיל
        function updateActiveWebsiteCard(websiteId) {
            document.querySelectorAll('.website-card').forEach(card => {
                card.classList.remove('active');
            });
            
            const cards = document.querySelectorAll('.website-card');
            const website = websites.find(w => w.id === websiteId);
            const websiteIndex = websites.indexOf(website);
            
            if (cards[websiteIndex]) {
                cards[websiteIndex].classList.add('active');
            }
        }

        // עדכון סלקטור אתרים
        function updateWebsiteSelector(websiteId) {
            const selector = document.getElementById('websiteSelector');
            selector.value = websiteId;
        }

        // עדכון עמדון
        function updateStatusBar(websiteName) {
            document.getElementById('currentWebsite').textContent = websiteName;
            document.getElementById('lastSaved').textContent = 'שמירה אחרונה: עכשיו';
        }

        // הגדרת אינטראקציה עם האתר
        function setupWebsiteInteraction() {
            const iframe = document.getElementById('websiteIframe');
            if (!iframe) return;

            // מאזין להודעות מהאתר
            window.addEventListener('message', function(e) {
                if (e.data.type === 'elementSelected') {
                    selectedElement = e.data;
                    updateElementInspector(e.data);
                    showMessage(`נבחר: ${e.data.element}`, 'info');
                }
            });
        }

        // עדכון אינספקטור אלמנטים
        function updateElementInspector(elementData) {
            const inspector = document.getElementById('elementProperties');
            inspector.innerHTML = `
                <div class="property-group">
                    <div class="property-label">סוג אלמנט</div>
                    <div style="color: rgba(255,255,255,0.8);">${elementData.element}</div>
                </div>
                <div class="property-group">
                    <div class="property-label">תוכן</div>
                    <input type="text" class="property-input" value="${elementData.content}" 
                           onchange="updateElementContent(this.value)" placeholder="הכנס תוכן חדש">
                </div>
                <div class="property-group">
                    <div class="property-label">פעולות</div>
                    <button class="control-btn" onclick="makeElementBold()">
                        <i class="fas fa-bold"></i> הדגש
                    </button>
                    <button class="control-btn" onclick="changeElementColor()">
                        <i class="fas fa-palette"></i> שנה צבע
                    </button>
                </div>
            `;
        }

        // עדכון תוכן אלמנט
        function updateElementContent(newContent) {
            if (!selectedElement) return;
            
            const iframe = document.getElementById('websiteIframe');
            if (iframe && iframe.contentWindow) {
                iframe.contentWindow.postMessage({
                    type: 'updateContent',
                    oldContent: selectedElement.content,
                    newContent: newContent
                }, '*');
                
                selectedElement.content = newContent;
                showMessage('התוכן עודכן בהצלחה!', 'success');
            }
        }

        // החלת צבע
        function applyColor(color) {
            if (currentWebsite) {
                currentWebsite.colors[0] = color;
                showMessage(`צבע ראשי שונה ל-${color}`, 'success');
                // כאן נוסיף לוגיקה לעדכון הצבעים באתר
            }
        }

        // שינוי מכשיר
        function setDevice(device) {
            currentDevice = device;
            const frame = document.getElementById('websiteFrame');
            
            // הסרת כל הקלאסים
            frame.className = 'website-frame';
            frame.classList.add(device);
            
            // עדכון כפתורים
            document.querySelectorAll('.device-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            showMessage(`עבר למצב ${device}`, 'info');
        }

        // זום
        function zoomIn() {
            if (currentZoom < 200) {
                currentZoom += 10;
                updateZoom();
            }
        }

        function zoomOut() {
            if (currentZoom > 50) {
                currentZoom -= 10;
                updateZoom();
            }
        }

        function updateZoom() {
            const frame = document.getElementById('websiteFrame');
            frame.style.transform = `scale(${currentZoom / 100})`;
            frame.style.transformOrigin = 'center center';
            document.getElementById('zoomLevel').textContent = currentZoom + '%';
        }

        // דמו מהיר
        function quickDemo() {
            if (websites.length > 0) {
                loadWebsite(websites[0].id);
                showMessage('דמו מהיר נטען! זהו אתר ד"ר מיכל רוזן', 'success');
            }
        }

        // שמירה
        function saveProject() {
            if (currentWebsite) {
                updateStatusBar(currentWebsite.name);
                showMessage('הפרויקט נשמר בהצלחה!', 'success');
            } else {
                showMessage('אין פרויקט פתוח לשמירה', 'warning');
            }
        }

        // ייצוא
        function exportProject() {
            if (currentWebsite) {
                const html = generateWebsiteHTML(currentWebsite);
                const blob = new Blob([html], { type: 'text/html' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `${currentWebsite.id}.html`;
                a.click();
                URL.revokeObjectURL(url);
                showMessage('האתר יוצא בהצלחה!', 'success');
            } else {
                showMessage('אין אתר פתוח לייצוא', 'warning');
            }
        }

        // תצוגה מקדימה
        function previewProject() {
            if (currentWebsite) {
                const html = generateWebsiteHTML(currentWebsite);
                const newWindow = window.open();
                newWindow.document.write(html);
                newWindow.document.close();
                showMessage('תצוגה מקדימה נפתחה בחלון חדש', 'success');
            } else {
                showMessage('אין אתר פתוח לתצוגה מקדימה', 'warning');
            }
        }

        // עוזר AI
        function askAI(question) {
            const chat = document.getElementById('aiChat');
            const input = document.getElementById('aiInput');
            
            // הוספת השאלה
            chat.innerHTML += `<div style="margin-bottom: 10px;"><strong>אתה:</strong> ${question}</div>`;
            
            // תשובת AI מדומה
            setTimeout(() => {
                const responses = {
                    'איך לשפר את העיצוב?': 'אני ממליץ לשנות את הצבעים לפלטה יותר מודרנית, להוסיף אנימציות עדינות ולשפר את הטיפוגרפיה. גם כדאי להוסיף רווח לבן יותר גדול בין האלמנטים.',
                    'שנה את הצבעים': 'בחרתי פלטת צבעים חדשה שמשלבת כחול כהה עם ירוק בהיר. זה יוסיף מקצועיות ויצור ניגודיות נעימה לעין.',
                    'כתוב תוכן חדש': 'אכתוב תוכן מקצועי ומעניין שמתאים לתחום שלך. התוכן יהיה ממוקד SEO וישפר את הנוכחות הדיגיטלית שלך.',
                    'אופטם את הביצועים': 'אמליץ על דחיסת תמונות, מינימיזציה של CSS ו-JavaScript, ושיפור זמני הטעינה. גם כדאי להוסיף lazy loading לתמונות.'
                };
                
                const response = responses[question] || 'זו שאלה מעניינת! אני אעזור לך למצוא את הפתרון הטוב ביותר בהתאם לצרכים שלך.';
                chat.innerHTML += `<div style="margin-bottom: 10px; background: rgba(255,255,255,0.1); padding: 10px; border-radius: 8px;"><strong>AI:</strong> ${response}</div>`;
                chat.scrollTop = chat.scrollHeight;
            }, 1000);
            
            input.value = '';
        }

        function handleAIInput(event) {
            if (event.key === 'Enter') {
                const question = event.target.value.trim();
                if (question) {
                    askAI(question);
                }
            }
        }

        // פונקציות כלי עיצוב
        function changeFontSize(action) {
            showMessage(`גודל פונט ${action === 'increase' ? 'הוגדל' : 'הוקטן'}`, 'info');
        }

        function toggleBold() {
            showMessage('הטקסט הוגדר למודגש', 'info');
        }

        function toggleItalic() {
            showMessage('הטקסט הוגדר לנטוי', 'info');
        }

        function setColumns(num) {
            showMessage(`פריסה שונתה ל-${num} עמודות`, 'info');
        }

        function generateNewPalette() {
            generateColorPalette();
            showMessage('פלטת צבעים חדשה נוצרה!', 'success');
        }

        // שמירה אוטומטית
        function setupAutoSave() {
            autoSaveInterval = setInterval(() => {
                if (currentWebsite) {
                    updateStatusBar(currentWebsite.name);
                }
            }, 30000); // כל 30 שניות
        }

        // הצגת הודעות
        function showMessage(text, type = 'info') {
            const container = document.getElementById('systemMessages');
            const message = document.createElement('div');
            message.className = `message ${type}`;
            message.innerHTML = `<div style="font-weight: 600; margin-bottom: 5px;">${getMessageIcon(type)} ${getMessageTitle(type)}</div><div>${text}</div>`;
            
            container.appendChild(message);
            
            // הסרה אוטומטית
            setTimeout(() => {
                if (message.parentNode) {
                    message.parentNode.removeChild(message);
                }
            }, 5000);
        }

        function getMessageIcon(type) {
            const icons = {
                'success': '<i class="fas fa-check-circle" style="color: #4CAF50;"></i>',
                'error': '<i class="fas fa-times-circle" style="color: #f44336;"></i>',
                'warning': '<i class="fas fa-exclamation-triangle" style="color: #ff9800;"></i>',
                'info': '<i class="fas fa-info-circle" style="color: #2196F3;"></i>'
            };
            return icons[type] || icons.info;
        }

        function getMessageTitle(type) {
            const titles = {
                'success': 'הצלחה',
                'error': 'שגיאה',
                'warning': 'אזהרה',
                'info': 'מידע'
            };
            return titles[type] || 'מידע';
        }

        // טיפול בשגיאות גלובלי
        window.addEventListener('error', function(e) {
            console.error('שגיאה במערכת:', e.error);
            showMessage('אירעה שגיאה במערכת. המערכת ממשיכה לפעול.', 'error');
        });

        // הגדרה גלובלית של פונקציות
        window.loadWebsite = loadWebsite;
        window.quickDemo = quickDemo;
        window.saveProject = saveProject;
        window.exportProject = exportProject;
        window.previewProject = previewProject;
        window.setDevice = setDevice;
        window.zoomIn = zoomIn;
        window.zoomOut = zoomOut;
        window.askAI = askAI;
        window.handleAIInput = handleAIInput;
        window.applyColor = applyColor;
        window.generateNewPalette = generateNewPalette;
        window.changeFontSize = changeFontSize;
        window.toggleBold = toggleBold;
        window.toggleItalic = toggleItalic;
        window.setColumns = setColumns;
        window.updateElementContent = updateElementContent;

        console.log('🎉 WebMaster Pro אדיטור מוכן לשימוש!');
    </script>
</body>
</html>
